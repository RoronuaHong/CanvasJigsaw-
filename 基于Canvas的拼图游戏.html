<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>基于Canvas的拼图游戏</title>
	<link rel="stylesheet" href="reset.css">
</head>
<style>
	#canvasimg {
		display: block;
		position: absolute;
		top: 100px;
		left: 50px;
		width: 600px;
		height: 600px;
	}
	#mycanvas {
		position: absolute;
		top: 100px;
		left: 700px;
		border:  1px solid #c3c3c3;
	}
</style>
<body>
	<img src="canvas.jpg" alt="" id="canvasimg">
	<canvas id="mycanvas" width="600", height="600"></canvas>
</body>
<script>
	/**
	 * [DrawImages 绘制图片]
	 * @param {[type]} ctx [画布设置]
	 * @param {[type]} img [图片设置]
	 */
	function DrawImages(ctx, img) {
		var _this = this;

		//设置数值参数
		this.sumarray = [];

		//老顺序
		this.oldarray = [];

		//新顺序
		this.newarray = [];

		//随机生成9个位置
		for(var i = 0; i < 8; i++) {
			this.sumarray[i] = i;
			this.oldarray[i] = i;
		}

		console.log(this.oldarray);

		for(var i = 0; i < 8; i++) {
			this.sumarray.sort(function() {
				return 0.5 - Math.random();
			});
		}

		//将位置乱序
		for(var i = 0; i < this.sumarray.length; i++) {
			ctx.drawImage(img, this.sumarray[i] % 3 * 200, Math.floor(this.sumarray[i] / 3) * 200, 200, 200, Math.floor(i % 3) * 200, Math.floor(i / 3) * 200, 200, 200);
			this.newarray.push(this.sumarray[i]);
		}

		document.onkeyup = function(e) {
			_this.KeyMoveBlock(ctx, img, e);
		}

		document.onmousedown = function() {
			_this.MouseMove();
		}

		//生成九个，隐藏一个，插入数组中
		// ctx.drawImage(img, 0,   0,   200, 200, 0,   0, 	200, 200);
		// ctx.drawImage(img, 200, 0,   200, 200, 200, 0, 	200, 200);
		// ctx.drawImage(img, 400, 0,   200, 200, 400, 0, 	200, 200);
		// ctx.drawImage(img, 0,   200, 200, 200, 0,   200, 200, 200);
		// ctx.drawImage(img, 200, 200, 200, 200, 200, 200, 200, 200);
		// ctx.drawImage(img, 400, 200, 200, 200, 400, 200, 200, 200);
		// ctx.drawImage(img, 0,   400, 200, 200, 0,   400, 200, 200);
		// ctx.drawImage(img, 200, 400, 200, 200, 200, 400, 200, 200);
		// ctx.drawImage(img, 400, 400, 200, 200, 400, 400, 200, 200);

	}

	//移动拼图方块
	DrawImages.prototype.KeyMoveBlock = function(ctx, img, e) {

		//上
		if(e.keyCode == 87 || e.keyCode == 38) {
			console.log(1)
		}

		//下
		if(e.keyCode == 83 || e.keyCode == 40) {
			// for(var i = 0; i < )
			console.log(this.sumarray);
		}

		//左
		if(e.keyCode == 65 || e.keyCode == 37) {
			console.log(3)
		}

		//右
		if(e.keyCode == 68 || e.keyCode == 39) {
			console.log(4)
		}
	}

	//鼠标点击交换位置
	DrawImages.prototype.MouseMove = function() {
		console.log(1)
	}

	/**
	 * [MyCanvas 绘制画布]
	 */

	function MainGame() {
		this.canvasEle = document.getElementById("mycanvas");
		this.contexts = this.canvasEle.getContext("2d");
		this.imgs = document.getElementById("canvasimg");

		new DrawImages(this.contexts, this.imgs);
	}

	/**
	 * [onload description]
	 * @return {[type]} [description]
	 */
	window.onload = function() {
		new MainGame();
	}
</script>
</html>